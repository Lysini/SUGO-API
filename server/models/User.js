var mongoose = require('mongoose');
var bcrypt = require('bcryptjs');
var SALT_WORK_FACTOR = 10;

var Schema = mongoose.Schema;

var UserSchema = new mongoose.Schema({
  email: {
    type: String,
    required: true,
    unique: true,
    select: false
  },
  password: {
    type: String,
    match: /^[a-zA-Z0-9]{3,30}$/,
    required: true,
    select: false
  },
  login: {
    type: String,
    required: true,
    unique: true,
    select: false
  },
  name: {
    type: String
  },
  avatar: {
    type: String,
    default: 'data:image/png;base64,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'
  },
  note:{
    type: String
  },
  age: {
    type: Number
  },
  events: [{
    type: mongoose.Schema.Types.ObjectId, 
    ref: 'Event'
  }]
});

UserSchema.pre('save', function(next) {
    var User = this;

  // only hash the password if it has been modified (or is new)
 
  if (!User.isModified('password')) return next();
        // generate a salt
    bcrypt.genSalt(SALT_WORK_FACTOR, function(err, salt) {
        if (err) return next(err);

        // hash the password using our new salt
        bcrypt.hash(User.password, salt, function(err, hash) {
            if (err) return next(err);

            // override the cleartext password with the hashed one
            User.password = hash;
            next();
        });
    });
}); 


UserSchema.methods.comparePassword = function(candidatePassword, cb) {
    bcrypt.compare(candidatePassword, this.password, function(err, isMatch) {
        if (err) return cb(err);
        cb(null, isMatch);
    });
};

module.exports = mongoose.model('User', UserSchema, 'User');